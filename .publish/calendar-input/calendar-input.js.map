{"version":3,"sources":["calendar-input/calendar-input.jsx"],"names":["CUSTOM_DATE_FORMAT","NATIVE_DATE_FORMAT","IS_BROWSER","window","SUPPORTS_INPUT_TYPE_DATE","inputtypes","date","CalendarInput","state","isMobile","isInputFocused","isCalendarFocused","opened","value","props","defaultValue","month","calendar","earlierLimit","undefined","laterLimit","calendarPopup","element","nativeCalendarTarget","customCalendarTarget","getBoxNode","setTarget","timeoutId","clearTimeout","changeCloseTimeoutId","cn","Input","Popup","commonProps","disabled","tabIndex","noValidate","wrapperProps","isMobilePopup","role","onClick","handleMobileWrapperClick","width","isNativeInput","size","label","placeholder","hint","error","id","name","handleCustomInputBlur","handleCustomInputChange","handleCustomInputFocus","handleInputKeyDown","withIcon","handleIconClick","handleMqMatchChange","canBeNative","handleNativeInputBlur","handleNativeInputChange","handleNativeInputFocus","renderPopup","directions","renderMobileHeader","mobile","handleCalendarBlur","handleCalendarFocus","handleCalendarKeyDown","handleCalendarChange","handleCalendarMonthChange","mobileTitle","handlePopupCloseClick","formatted","isTriggeredByKeyboard","setTimeout","blur","setState","onCalendarChange","onChange","event","changeFocused","which","ESCAPE","preventDefault","focus","ENTER","SPACE","onCalendarKeyDown","onKeyDown","length","onInputChange","target","onInputFocus","resultEvent","onInputBlur","DOWN_ARROW","onInputKeyDown","isMatched","setOpened","targetRef","scrollTo","mobileMode","focusedState","newState","relatedTarget","explicitOriginalTarget","document","activeElement","calendarWillReceiveFocus","getNode","newFocused","newOpened","onFocus","onBlur","newMonth","Component","propTypes","string","shape","number","selectedFrom","selectedTo","onValueChange","func","onMonthChange","outputFormat","months","arrayOf","weekdays","offDays","showArrows","bool","isKeyboard","node","theme","oneOf","className","oneOfType","onKeyUp","defaultProps"],"mappings":"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","file":"calendar-input.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { autobind } from 'core-decorators';\nimport React from 'react';\nimport Type from 'prop-types';\n\nimport Calendar from '../calendar/calendar';\nimport Icon from '../icon/icon';\nimport Input from '../input/input';\nimport Mq from '../mq/mq';\nimport Popup from '../popup/popup';\nimport PopupHeader from '../popup-header/popup-header';\n\nimport cn from '../cn';\nimport keyboardCode from '../lib/keyboard-code';\nimport Modernizr from '../modernizr';\nimport { isNodeOutsideElement } from '../lib/window';\nimport { parseDate, calculateMonth, changeDateFormat } from './utils';\nimport performance from '../performance';\n\n/**\n * NB: В нативном календаре нельзя менять формат даты. Приемлем только YYYY-MM-DD формат.\n * https://www.w3.org/TR/html-markup/input.date.html#input.date.attrs.value\n * https://tools.ietf.org/html/rfc3339#section-5.6\n*/\nconst CUSTOM_DATE_FORMAT = 'DD.MM.YYYY';\nconst NATIVE_DATE_FORMAT = 'YYYY-MM-DD';\nconst IS_BROWSER = typeof window !== 'undefined';\nconst SUPPORTS_INPUT_TYPE_DATE = IS_BROWSER && Modernizr.inputtypes.date;\n\n\n/**\n * Компонент для ввода даты.\n */\n@cn('calendar-input', Input, Popup)\n@performance(true)\nclass CalendarInput extends React.Component {\n    static propTypes = {\n        /** Содержимое поля ввода */\n        value: Type.string,\n        /** Содержимое поля ввода, указанное по умолчанию */\n        defaultValue: Type.string,\n        /** Свойства компонента [Calendar](../calendar/) */\n        calendar: Type.shape({\n            value: Type.number,\n            selectedFrom: Type.number,\n            selectedTo: Type.number,\n            earlierLimit: Type.number,\n            laterLimit: Type.number,\n            month: Type.number,\n            onValueChange: Type.func,\n            onMonthChange: Type.func,\n            outputFormat: Type.string,\n            months: Type.arrayOf(Type.string),\n            weekdays: Type.arrayOf(Type.string),\n            offDays: Type.arrayOf(Type.number),\n            showArrows: Type.bool,\n            isKeyboard: Type.bool,\n            error: Type.node,\n            theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n            className: Type.oneOfType([Type.func, Type.string]),\n            onKeyDown: Type.func,\n            onKeyUp: Type.func,\n            onFocus: Type.func,\n            onBlur: Type.func\n        }),\n        /** Управление возможностью раскрытия календаря */\n        opened: Type.bool,\n        /** Управление возможностью компонента занимать всю ширину родителя */\n        width: Type.oneOf(['default', 'available']),\n        /** Направления, в которые может открываться попап компонента */\n        directions: Type.arrayOf(Type.oneOf([\n            'anchor', 'top-left', 'top-center', 'top-right', 'left-top', 'left-center', 'left-bottom', 'right-top',\n            'right-center', 'right-bottom', 'bottom-left', 'bottom-center', 'bottom-right'\n        ])),\n        /** Управление возможностью изменения значения компонента */\n        disabled: Type.bool,\n        /** Размер компонента */\n        size: Type.oneOf(['s', 'm', 'l', 'xl']),\n        /** Последовательность перехода между контролами при нажатии на Tab */\n        tabIndex: Type.number,\n        /** Показывать иконку календаря в инпуте */\n        withIcon: Type.bool,\n        /** Лейбл для поля */\n        label: Type.node,\n        /** Подсказка в поле */\n        placeholder: Type.string,\n        /** Подсказка под полем */\n        hint: Type.node,\n        /** Отображение ошибки */\n        error: Type.node,\n        /** Управление нативным режимом на мобильных устройствах */\n        mobileMode: Type.oneOf(['native', 'popup']),\n        /** Подсказка над меню в мобильном режиме */\n        mobileTitle: Type.node,\n        /** Идентификатор компонента в DOM */\n        id: Type.string,\n        /** Имя компонента в DOM */\n        name: Type.string,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Обработчик установки фокуса на компонент */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса с компонента */\n        onBlur: Type.func,\n        /** Обработчик установки фокуса на поле ввода */\n        onInputFocus: Type.func,\n        /** Обработчик снятия фокуса с поля ввода */\n        onInputBlur: Type.func,\n        /** Обработчик ввода даты в текстовом поле */\n        onInputChange: Type.func,\n        /** Обработчик выбора даты в календаре */\n        onCalendarChange: Type.func,\n        /** Обрабочик изменения даты в календаре */\n        onChange: Type.func,\n        /** Обработчик события нажатия на клавишу в момент, когда фокус находится на компоненте */\n        onKeyDown: Type.func,\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится в календаре */\n        onCalendarKeyDown: Type.func,\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится на текстовом поле */\n        onInputKeyDown: Type.func\n    };\n\n    static defaultProps = {\n        withIcon: true,\n        directions: ['bottom-left', 'bottom-right', 'top-left', 'top-right'],\n        placeholder: '00.00.0000',\n        mobileMode: 'native'\n    };\n\n    state = {\n        isMobile: false,\n        isInputFocused: false,\n        isCalendarFocused: false,\n        opened: false,\n        value: this.props.defaultValue || '',\n        month: calculateMonth(\n            this.props.value,\n            CUSTOM_DATE_FORMAT,\n            this.props.calendar ? this.props.calendar.earlierLimit : undefined,\n            this.props.calendar ? this.props.calendar.laterLimit : undefined\n        )\n    };\n\n    /**\n     * @type {Number}\n     */\n    timeoutId;\n\n    /**\n     * @type {Number}\n     */\n    changeCloseTimeoutId;\n\n    /**\n     * @type {Calendar}\n     */\n    calendar;\n\n    /**\n     * @type {Popup}\n     */\n    calendarPopup;\n\n    /**\n     * @type {Input}\n     */\n    customCalendarTarget;\n\n    /**\n     * @type {HTMLInputElement}\n     */\n    nativeCalendarTarget;\n\n    componentDidMount() {\n        if (this.calendarPopup) {\n            let element;\n\n            if (this.nativeCalendarTarget) {\n                element = this.nativeCalendarTarget;\n            } else if (this.customCalendarTarget) {\n                element = this.customCalendarTarget.getBoxNode();\n            }\n\n            if (element) {\n                this.calendarPopup.setTarget(element);\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n            this.timeoutId = null;\n        }\n        if (this.changeCloseTimeoutId) {\n            clearTimeout(this.changeCloseTimeoutId);\n            this.changeCloseTimeoutId = null;\n        }\n    }\n\n    render(cn, Input, Popup) {\n        let value = this.props.value !== undefined\n            ? this.props.value\n            : this.state.value;\n\n        let commonProps = {\n            disabled: this.props.disabled,\n            tabIndex: this.props.tabIndex,\n            noValidate: true\n        };\n\n        let wrapperProps = this.isMobilePopup() && !this.props.disabled\n            ? {\n                role: 'button',\n                tabIndex: 0,\n                onClick: this.handleMobileWrapperClick\n            }\n            : {};\n\n        return (\n            <span\n                className={ cn({ width: this.props.width }) }\n                { ...wrapperProps }\n            >\n                <Input\n                    ref={ (customCalendarTarget) => {\n                        this.customCalendarTarget = customCalendarTarget;\n                    } }\n                    { ...commonProps }\n                    className={ cn('custom-control') }\n                    disabledAttr={ this.isNativeInput() || this.isMobilePopup() }\n                    focused={ this.state.isInputFocused || this.state.isCalendarFocused }\n                    mask='11.11.1111'\n                    size={ this.props.size }\n                    type='text'\n                    label={ this.props.label }\n                    placeholder={ this.props.placeholder }\n                    hint={ this.props.hint }\n                    error={ this.props.error }\n                    value={ value }\n                    width={ this.props.width }\n                    id={ this.props.id }\n                    name={ this.props.name }\n                    onBlur={ this.handleCustomInputBlur }\n                    onChange={ this.handleCustomInputChange }\n                    onFocus={ this.handleCustomInputFocus }\n                    onKeyDown={ this.handleInputKeyDown }\n                    icon={\n                        this.props.withIcon &&\n                        <Icon\n                            size={ this.props.size }\n                            icon='calendar'\n                            onClick={ this.handleIconClick }\n                        />\n                    }\n                />\n                <Mq\n                    query='--small-only'\n                    touch={ true }\n                    onMatchChange={ this.handleMqMatchChange }\n                >\n                    {\n                        this.canBeNative() &&\n                        <input\n                            ref={ (nativeCalendarTarget) => {\n                                this.nativeCalendarTarget = nativeCalendarTarget;\n                            } }\n                            { ...commonProps }\n                            className={ cn('native-control') }\n                            type='date'\n                            value={ changeDateFormat(value, CUSTOM_DATE_FORMAT, NATIVE_DATE_FORMAT) }\n                            onBlur={ this.handleNativeInputBlur }\n                            onChange={ this.handleNativeInputChange }\n                            onFocus={ this.handleNativeInputFocus }\n                        />\n                    }\n                </Mq>\n                { this.renderPopup(cn, value, Popup) }\n            </span>\n        );\n    }\n\n    renderPopup(cn, value, Popup) {\n        let opened = this.props.opened !== undefined\n            ? this.props.opened\n            : this.state.opened;\n\n        return (\n            <Popup\n                ref={ (calendarPopup) => { this.calendarPopup = calendarPopup; } }\n                for={ this.props.name }\n                autoclosable={ true }\n                visible={ opened }\n                directions={ this.props.directions }\n                target={ this.isMobilePopup() ? 'screen' : 'anchor' }\n                header={ this.isMobilePopup() && this.renderMobileHeader() }\n            >\n                <div className={ cn('calendar-wrapper', { mobile: this.isMobilePopup() }) }>\n                    <Calendar\n                        ref={ (calendar) => { this.calendar = calendar; } }\n                        month={ this.state.month }\n                        { ...this.props.calendar }\n                        value={ parseDate(value, CUSTOM_DATE_FORMAT) }\n                        onBlur={ this.handleCalendarBlur }\n                        onFocus={ this.handleCalendarFocus }\n                        onKeyDown={ this.handleCalendarKeyDown }\n                        onValueChange={ this.handleCalendarChange }\n                        onMonthChange={ this.handleCalendarMonthChange }\n                    />\n                </div>\n            </Popup>\n        );\n    }\n\n    renderMobileHeader() {\n        return (\n            <PopupHeader\n                size={ this.props.size }\n                title={ this.props.mobileTitle || this.props.label || 'Выберите дату' }\n                onCloseClick={ this.handlePopupCloseClick }\n            />\n        );\n    }\n\n    @autobind\n    handleCalendarChange(value, formatted, isTriggeredByKeyboard) {\n        if (!isTriggeredByKeyboard) {\n            this.changeCloseTimeoutId = setTimeout(() => {\n                this.calendar.blur(); // FF не испускает событие `blur` когда элементы становятся невидимыми, делаем это явно\n                this.setState({\n                    opened: false\n                });\n                this.changeCloseTimeoutId = null;\n            }, 0);\n        }\n\n        this.setState({ value: formatted });\n\n        if (this.props.onCalendarChange) {\n            this.props.onCalendarChange(formatted);\n        }\n\n        if (this.props.onChange) {\n            this.props.onChange(formatted, value);\n        }\n    }\n\n    @autobind\n    handleCalendarMonthChange(month) {\n        this.setState({\n            month\n        });\n    }\n\n    @autobind\n    handleCalendarFocus(event) {\n        this.changeFocused({ isCalendarFocused: true }, event);\n    }\n\n    @autobind\n    handleCalendarBlur(event) {\n        this.changeFocused({ isCalendarFocused: false }, event);\n    }\n\n    @autobind\n    handleCalendarKeyDown(event) {\n        switch (event.which) {\n            case keyboardCode.ESCAPE:\n                event.preventDefault();\n                this.customCalendarTarget.focus();\n                break;\n            case keyboardCode.ENTER:\n            case keyboardCode.SPACE:\n                event.preventDefault();\n                this.setState({\n                    opened: false\n                });\n                break;\n        }\n\n        if (this.props.onCalendarKeyDown) {\n            this.props.onCalendarKeyDown(event);\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event);\n        }\n    }\n\n    @autobind\n    handleIconClick() {\n        this.customCalendarTarget.focus();\n    }\n\n    @autobind\n    handleCustomInputChange(value) {\n        let month = calculateMonth(\n            value,\n            CUSTOM_DATE_FORMAT,\n            this.props.calendar ? this.props.calendar.earlierLimit : undefined,\n            this.props.calendar ? this.props.calendar.laterLimit : undefined\n        );\n\n        this.setState({ value });\n\n        // Изменяет месяц в календаре в соответствии с введёной в поле валидной датой\n        if (value && value.length === CUSTOM_DATE_FORMAT.length && month !== this.state.month) {\n            this.setState({ month });\n        }\n\n        if (this.props.onInputChange) {\n            this.props.onInputChange(value);\n        }\n\n        if (this.props.onChange) {\n            this.props.onChange(value, parseDate(value, CUSTOM_DATE_FORMAT));\n        }\n    }\n\n    @autobind\n    handleNativeInputChange(event) {\n        let value = changeDateFormat(event.target.value, NATIVE_DATE_FORMAT, CUSTOM_DATE_FORMAT);\n\n        // Детектим нажатие `сlear` в нативном календаре\n        if (this.state.value === value) {\n            value = '';\n        }\n\n        this.setState({ value });\n\n        if (this.props.onInputChange) {\n            this.props.onInputChange(value);\n        }\n\n        if (this.props.onChange) {\n            this.props.onChange(value, parseDate(value, CUSTOM_DATE_FORMAT));\n        }\n    }\n\n    @autobind\n    handleCustomInputFocus(event) {\n        this.changeFocused({ isInputFocused: true }, event);\n\n        if (this.props.onInputFocus) {\n            this.props.onInputFocus(event);\n        }\n    }\n\n    @autobind\n    handleNativeInputFocus(event) {\n        // Копируем пришедший из аргументов SyntheticEvent для дальнейшего редактирования\n        let resultEvent = { ...event,\n            // Трансформируем нативную YYYY-MM-DD дату в кастомный формат на вывод в коллбэках\n            target: { value: changeDateFormat(event.target.value, NATIVE_DATE_FORMAT, CUSTOM_DATE_FORMAT) }\n        };\n\n        this.changeFocused({ isInputFocused: true }, resultEvent);\n\n        if (this.props.onInputFocus) {\n            this.props.onInputFocus(resultEvent);\n        }\n    }\n\n    @autobind\n    handleCustomInputBlur(event) {\n        this.changeFocused({ isInputFocused: false }, event);\n\n        if (this.props.onInputBlur) {\n            this.props.onInputBlur(event);\n        }\n    }\n\n    @autobind\n    handleNativeInputBlur(event) {\n        // Копируем пришедший из аргументов SyntheticEvent для дальнейшего редактирования\n        let resultEvent = { ...event,\n            // Трансформируем нативную YYYY-MM-DD дату в кастомный формат на вывод в коллбэках\n            target: { value: changeDateFormat(event.target.value, NATIVE_DATE_FORMAT, CUSTOM_DATE_FORMAT) }\n        };\n\n        this.changeFocused({ isInputFocused: false }, resultEvent);\n\n        if (this.props.onInputBlur) {\n            this.props.onInputBlur(resultEvent);\n        }\n    }\n\n    @autobind\n    handleInputKeyDown(event) {\n        switch (event.which) {\n            case keyboardCode.DOWN_ARROW: {\n                event.preventDefault();\n\n                let value = this.props.value !== undefined\n                    ? this.props.value\n                    : this.state.value;\n\n                this.setState({\n                    opened: true,\n                    month: calculateMonth(\n                        value,\n                        CUSTOM_DATE_FORMAT,\n                        this.props.calendar ? this.props.calendar.earlierLimit : undefined,\n                        this.props.calendar ? this.props.calendar.laterLimit : undefined\n                    )\n                });\n\n                this.calendar.focus();\n\n                break;\n            }\n            case keyboardCode.ESCAPE: {\n                event.preventDefault();\n\n                this.setState({\n                    opened: false\n                });\n\n                break;\n            }\n        }\n\n        if (this.props.onInputKeyDown) {\n            this.props.onInputKeyDown(event);\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event);\n        }\n    }\n\n    @autobind\n    handleMqMatchChange(isMatched) {\n        this.setState({\n            isMobile: isMatched\n        });\n    }\n\n    @autobind\n    handleMobileWrapperClick() {\n        this.setOpened(true);\n    }\n\n    @autobind\n    handlePopupCloseClick() {\n        this.setOpened(false);\n    }\n\n    /**\n     * Устанавливает фокус на поле ввода, открывает календарь.\n     *\n     * @public\n     */\n    focus() {\n        let targetRef = this.nativeCalendarTarget || this.customCalendarTarget;\n\n        targetRef.focus();\n    }\n\n    /**\n     * Убирает фокус с поля ввода.\n     *\n     * @public\n     */\n    blur() {\n        let targetRef = this.nativeCalendarTarget || this.customCalendarTarget;\n\n        targetRef.blur();\n    }\n\n    /**\n     * Скроллит страницу до поля ввода.\n     *\n     * @public\n     */\n    scrollTo() {\n        this.customCalendarTarget.scrollTo();\n    }\n\n    canBeNative() {\n        return SUPPORTS_INPUT_TYPE_DATE && this.props.mobileMode === 'native';\n    }\n\n    isNativeInput() {\n        return this.state.isMobile && this.canBeNative();\n    }\n\n    isMobilePopup() {\n        return this.state.isMobile && this.props.mobileMode === 'popup';\n    }\n\n    changeFocused(focusedState, event) {\n        let newState = {\n            isInputFocused: this.state.isInputFocused,\n            isCalendarFocused: this.state.isCalendarFocused,\n            ...focusedState\n        };\n\n        // При переключении фокуса с поля ввода на календарь событие `blur` у поля ввода иногда происходит перед фокусом календаря\n        // Поэтому проверяем элемент который получит фокус после блюра и если он внутри календаря - оставляем сфокусированное состояние.\n        let relatedTarget = event.relatedTarget || // не поддерживается в FF и IE10 https://github.com/facebook/react/issues/2011\n            event.explicitOriginalTarget || // не поддерживается в IE\n            document.activeElement; // В IE вернет не <calendar> а конкретную ноду, на которую пришел фокус\n\n        let calendarWillReceiveFocus = !isNodeOutsideElement(relatedTarget, this.calendar.getNode());\n\n        let newFocused = newState.isInputFocused\n            || newState.isCalendarFocused\n            || calendarWillReceiveFocus;\n\n        this.setState(focusedState);\n\n        let newOpened = false;\n\n        if (newFocused) {\n            if (this.props.onFocus) {\n                this.props.onFocus(event);\n            }\n\n            newOpened = true;\n        } else if (this.props.onBlur) {\n            this.props.onBlur(event);\n        }\n\n        if (!this.isNativeInput()) {\n            this.setOpened(newOpened);\n        }\n    }\n\n    setOpened(opened) {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n        }\n        this.timeoutId = setTimeout(() => {\n            let value = this.props.value !== undefined\n                ? this.props.value\n                : this.state.value;\n\n            let newMonth = this.state.opened !== opened\n                ? calculateMonth(\n                    value,\n                    CUSTOM_DATE_FORMAT,\n                    this.props.calendar ? this.props.calendar.earlierLimit : undefined,\n                    this.props.calendar ? this.props.calendar.laterLimit : undefined\n                )\n                : this.state.month;\n\n            this.setState({\n                opened,\n                month: newMonth\n            });\n\n            this.timeoutId = null;\n        }, 0);\n    }\n}\n\nexport default CalendarInput;\n"]}