{"version":3,"sources":["menu/menu.jsx"],"names":["Menu","state","highlightedItem","checkedItems","hovered","menuItemList","blurTimeoutId","props","content","length","mode","firstItem","getFirstItem","changeCheckedItems","value","clearTimeout","cn","root","style","size","view","groupView","disabled","handleMouseEnter","handleMouseLeave","handleKeyDown","handleKeyUp","handleFocus","handleBlur","renderMenuItemList","result","groupKey","forEach","item","type","push","title","renderMenuItem","itemProps","isItemDisabled","clickHandler","onClick","handleMenuItemClick","menuItem","ref","menuItemProps","undefined","instance","key","getIndexInCheckedItemsList","handleMenuItemMouseEnter","handleMenuItemMouseLeave","setNewCheckedItems","event","setState","onMouseEnter","onMouseLeave","onKeyUp","highlightedMenuItem","menuIteListLength","which","DOWN_ARROW","preventDefault","index","onHighlightItem","UP_ARROW","ENTER","SPACE","onKeyDown","onFocus","persist","setTimeout","document","activeElement","onBlur","focus","autoFocusFirstItem","blur","Array","from","indexInCheckedItemsList","splice","onItemClick","onItemCheck","indexOf","Component","propTypes","string","oneOf","bool","focused","shape","oneOfType","number","any","arrayOf","node","array","object","theme","className","func","defaultProps"],"mappings":"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","file":"menu.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/* eslint jsx-a11y/no-static-element-interactions: 0 */\n\nimport { autobind } from 'core-decorators';\nimport React from 'react';\nimport styleType from 'react-style-proptype';\nimport Type from 'prop-types';\n\nimport MenuItem from '../menu-item/menu-item';\n\nimport cn from '../cn';\nimport { isNodeOutsideElement } from '../lib/window';\nimport keyboardCode from '../lib/keyboard-code';\nimport performance from '../performance';\n\n/**\n * Компонент меню.\n */\n@cn('menu')\n@performance(true)\nclass Menu extends React.Component {\n    static propTypes = {\n        /** Тип расположения меню: 'horizontal' */\n        view: Type.string,\n        /** Размещение заголовка групп: обычное или в одну строку с первым элементом группы */\n        groupView: Type.oneOf(['default', 'line']),\n        /** Тип списка вариантов меню */\n        mode: Type.oneOf(['basic', 'check', 'radio', 'radio-check']),\n        /** Управление возможностью изменения значения */\n        disabled: Type.bool,\n        /** Управление состоянием фокуса элемента */\n        focused: Type.bool,\n        /** Управление автоматическим фокусом на первом элементе при вызове публичного метода focus */\n        autoFocusFirstItem: Type.bool,\n        /** Элемент меню, на котором стоит выделение */\n        highlightedItem: Type.shape({\n            /** Уникальный идентификатор */\n            ref: Type.oneOfType([Type.number, Type.string]),\n            /** Элемент списка типа ContentItem */\n            item: Type.any\n        }),\n        /** Список объектов ContentItem */\n        content: Type.arrayOf(Type.shape({\n            /** Тип элемента */\n            type: Type.oneOf(['item', 'group']),\n            /** Только для type='item', свойство для компонента [MenuItem](../menu-item/) */\n            value: Type.oneOfType([Type.string, Type.number]),\n            /** Содержание элемента */\n            content: Type.oneOfType([Type.node, Type.array]),\n            /** Только для type='item': свойства для компонента [MenuItem](../menu-item/) */\n            props: Type.object\n        })),\n        /** Список значений выбранных элементов */\n        checkedItems: Type.arrayOf(Type.oneOfType([\n            Type.string,\n            Type.number\n        ])),\n        /** Размер компонента */\n        size: Type.oneOf(['s', 'm', 'l', 'xl']),\n        /** Объект со стилями */\n        style: styleType,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.oneOfType([Type.func, Type.string]),\n        /** Обработчик клика по варианту меню */\n        onItemClick: Type.func,\n        /** Обработчик выбора варианта меню */\n        onItemCheck: Type.func,\n        /** Обработчик события наведения курсора на меню */\n        onMouseEnter: Type.func,\n        /** Обработчик события снятия курсора с меню */\n        onMouseLeave: Type.func,\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyDown: Type.func,\n        /** Обработчик события отжатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyUp: Type.func,\n        /** Обработчик фокуса */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса */\n        onBlur: Type.func,\n        /** Обработчик события выделения элемента меню, принимает на вход переменную типа HighlightedItem */\n        onHighlightItem: Type.func\n    };\n\n    static defaultProps = {\n        size: 'm',\n        mode: 'basic',\n        groupView: 'default',\n        autoFocusFirstItem: false\n    };\n\n    state = {\n        highlightedItem: null,\n        checkedItems: [],\n        hovered: false\n    };\n\n    root;\n    menuItemList = [];\n    blurTimeoutId = null;\n\n    componentDidMount() {\n        if (!!this.props.content && this.props.content.length > 0\n            && (!this.props.checkedItems || this.props.checkedItems.length === 0)\n            && this.props.mode === 'radio') {\n            let firstItem = this.getFirstItem(this.props.content);\n\n            this.changeCheckedItems([firstItem.value]);\n        }\n    }\n\n    componentWillUpdate() {\n        this.menuItemList = [];\n    }\n\n    componentWillUnmount() {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n    }\n\n    render(cn) {\n        /* eslint-disable jsx-a11y/no-noninteractive-tabindex */\n        return (\n            <div\n                ref={ (root) => { this.root = root; } }\n                style={ this.props.style }\n                className={ cn({\n                    size: this.props.size,\n                    view: this.props.view,\n                    'group-view': this.props.groupView,\n                    hovered: this.state.hovered,\n                    disabled: this.props.disabled,\n                    mode: this.props.mode\n                }) }\n                tabIndex={ 0 }\n                onMouseEnter={ this.handleMouseEnter }\n                onMouseLeave={ this.handleMouseLeave }\n                onKeyDown={ this.handleKeyDown }\n                onKeyUp={ this.handleKeyUp }\n                onFocus={ this.handleFocus }\n                onBlur={ this.handleBlur }\n            >\n                { !!this.props.content && this.renderMenuItemList(cn, this.props.content) }\n            </div>\n        );\n        /* eslint-enable jsx-a11y/no-noninteractive-tabindex */\n    }\n\n    renderMenuItemList(cn, content) {\n        let result = [];\n        let groupKey = 0;\n\n        content.forEach((item) => {\n            if (item.type === 'group') {\n                result.push(\n                    <div\n                        className={ cn('group') }\n                        key={ `group_${groupKey}` }\n                    >\n                        { !!item.title &&\n                            <div className={ cn('group-title') }>\n                                { item.title }\n                            </div>\n                        }\n                        { this.renderMenuItemList(cn, item.content) }\n                    </div>\n                );\n                groupKey += 1;\n            } else {\n                result.push(this.renderMenuItem(item));\n            }\n        });\n\n        return result;\n    }\n\n    renderMenuItem(item) {\n        let itemProps = item.props || {};\n        let isItemDisabled = this.props.disabled || itemProps.disabled;\n        let clickHandler = this.props.mode === 'basic' ? itemProps.onClick : () => this.handleMenuItemClick(item);\n        let menuItem = {\n            item,\n            ref: item.value\n        };\n        let menuItemProps = {\n            ...itemProps,\n            disabled: isItemDisabled,\n            value: item.value,\n            size: this.props.size || itemProps.size,\n            onClick: !isItemDisabled ? clickHandler : undefined\n        };\n        let highlightedItem = this.props.highlightedItem === undefined\n            ? this.state.highlightedItem\n            : this.props.highlightedItem;\n\n        this.menuItemList.push(menuItem);\n\n        return (\n            <MenuItem\n                { ...menuItemProps }\n                ref={ (instance) => { menuItem.instance = instance; } }\n                key={ item.key || item.value }\n                checked={ this.getIndexInCheckedItemsList(item.value) !== -1 }\n                type={ this.props.mode !== 'basic' ? 'block' : itemProps.type }\n                onMouseEnter={ () => this.handleMenuItemMouseEnter(menuItem) }\n                onMouseLeave={ this.handleMenuItemMouseLeave }\n                hovered={ highlightedItem && highlightedItem.ref === menuItem.ref }\n            >\n                { item.content }\n            </MenuItem>\n        );\n    }\n\n    @autobind\n    handleMenuItemClick(item) {\n        this.setNewCheckedItems(item);\n    }\n\n    @autobind\n    handleMouseEnter(event) {\n        this.setState({ hovered: true });\n\n        if (this.props.onMouseEnter) {\n            this.props.onMouseEnter(event);\n        }\n    }\n\n    @autobind\n    handleMouseLeave(event) {\n        this.setState({ hovered: false });\n\n        if (this.props.onMouseLeave) {\n            this.props.onMouseLeave(event);\n        }\n    }\n\n    @autobind\n    handleKeyUp(event) {\n        if (this.props.onKeyUp) {\n            this.props.onKeyUp(event);\n        }\n    }\n\n    @autobind\n    handleKeyDown(event) {\n        let highlightedItem = null;\n        let highlightedMenuItem = null;\n        let menuIteListLength = this.menuItemList.length;\n\n        switch (event.which) {\n            case keyboardCode.DOWN_ARROW: {\n                event.preventDefault();\n\n                if (this.state.highlightedItem) {\n                    this.menuItemList.forEach((item, index, menuItemList) => {\n                        if (item.ref === this.state.highlightedItem.ref) {\n                            if (index + 1 === menuIteListLength) {\n                                highlightedItem = menuItemList[0];\n                            } else {\n                                highlightedItem = menuItemList[index + 1];\n                            }\n                        }\n                    });\n                } else {\n                    highlightedItem = this.menuItemList[0];\n                }\n\n                this.setState({\n                    highlightedItem\n                });\n\n                if (this.props.onHighlightItem) {\n                    this.props.onHighlightItem(highlightedItem);\n                }\n\n                break;\n            }\n            case keyboardCode.UP_ARROW: {\n                event.preventDefault();\n\n                if (this.state.highlightedItem) {\n                    this.menuItemList.forEach((item, index, menuItemList) => {\n                        if (item.ref === this.state.highlightedItem.ref) {\n                            if (index - 1 < 0) {\n                                highlightedItem = menuItemList[menuIteListLength - 1];\n                            } else {\n                                highlightedItem = menuItemList[index - 1];\n                            }\n                        }\n                    });\n                } else {\n                    highlightedItem = this.menuItemList[menuIteListLength - 1];\n                }\n\n                this.setState({\n                    highlightedItem\n                });\n\n                if (this.props.onHighlightItem) {\n                    this.props.onHighlightItem(highlightedItem);\n                }\n\n                break;\n            }\n            case keyboardCode.ENTER:\n            case keyboardCode.SPACE: {\n                event.preventDefault();\n\n                highlightedItem = this.props.highlightedItem === undefined\n                    ? this.state.highlightedItem\n                    : this.props.highlightedItem;\n\n                if (highlightedItem) {\n                    this.setNewCheckedItems(highlightedItem.item);\n                }\n\n                break;\n            }\n        }\n\n        if (highlightedItem) {\n            highlightedMenuItem = highlightedItem.instance;\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event, highlightedMenuItem);\n        }\n    }\n\n    @autobind\n    handleFocus(event) {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    }\n\n    @autobind\n    handleBlur(event) {\n        event.persist();\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n        }\n\n        this.blurTimeoutId = setTimeout(() => {\n            if (isNodeOutsideElement(document.activeElement, this.root) && this.props.onBlur) {\n                this.props.onBlur(event);\n            }\n            this.blurTimeoutId = null;\n        }, 0);\n    }\n\n    handleMenuItemMouseEnter(menuItem) {\n        this.setState({\n            highlightedItem: menuItem\n        });\n\n        if (this.props.onHighlightItem) {\n            this.props.onHighlightItem(menuItem);\n        }\n    }\n\n    @autobind\n    handleMenuItemMouseLeave() {\n        this.setState({\n            highlightedItem: null\n        });\n\n        if (this.props.onHighlightItem) {\n            this.props.onHighlightItem(null);\n        }\n    }\n\n    /**\n     * Возвращает корневой `HTMLElement` компонента.\n     *\n     * @public\n     * @returns {HTMLElement}\n     */\n    getNode() {\n        return this.root;\n    }\n\n    /**\n     * Устанавливает фокус на меню.\n     *\n     * @public\n     */\n    focus() {\n        this.root.focus();\n\n        if (this.props.autoFocusFirstItem) {\n            let highlightedItem = this.menuItemList[0];\n            this.setState({\n                highlightedItem\n            });\n\n            if (this.props.onHighlightItem) {\n                this.props.onHighlightItem(highlightedItem);\n            }\n        }\n    }\n\n    /**\n     * Убирает фокус с меню.\n     *\n     * @public\n     */\n    blur() {\n        if (document.activeElement) {\n            document.activeElement.blur();\n        }\n    }\n\n    setNewCheckedItems(item) {\n        let value = item.value;\n        let checkedItems = this.props.checkedItems !== undefined\n            ? Array.from(this.props.checkedItems)\n            : Array.from(this.state.checkedItems);\n        let indexInCheckedItemsList = this.getIndexInCheckedItemsList(value);\n\n        switch (this.props.mode) {\n            case 'check':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems.push(value);\n                } else {\n                    checkedItems.splice(indexInCheckedItemsList, 1);\n                }\n                break;\n            case 'radio':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems = [value];\n                }\n                break;\n            case 'radio-check':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems = [value];\n                } else {\n                    checkedItems = [];\n                }\n                break;\n            default:\n                break;\n        }\n\n        if (this.props.onItemClick) {\n            this.props.onItemClick(item);\n        }\n\n        this.changeCheckedItems(checkedItems);\n        this.focus();\n    }\n\n    /**\n     * Изменяет выбранные значения.\n     *\n     * @param {Array.<String|Number>} checkedItems Список выбранных значений\n     */\n    changeCheckedItems(checkedItems) {\n        this.setState({\n            checkedItems\n        });\n\n        if (this.props.onItemCheck) {\n            this.props.onItemCheck(checkedItems);\n        }\n    }\n\n    @autobind\n    getIndexInCheckedItemsList(value) {\n        let checkedItems = this.props.checkedItems ? this.props.checkedItems : this.state.checkedItems;\n        return checkedItems.indexOf(value);\n    }\n\n    getFirstItem(content) {\n        let firstItem = content[0];\n\n        return firstItem.type === 'group' ? this.getFirstItem(firstItem.content) : firstItem;\n    }\n}\n\nexport default Menu;\n"]}